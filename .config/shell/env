#!/bin/sh

export XDG_DATA_HOME="$HOME/.local/share"
export XDG_CONFIG_HOME="$HOME/.config"
export XDG_CACHE_HOME="$HOME/.cache"
if [ -z "$XDG_RUNTIME_DIR" ]; then
  export XDG_RUNTIME_DIR="$TMPDIR"
fi

export PATH="/usr/local/games"
export PATH="/usr/games:$PATH"
export PATH="/bin:$PATH"
export PATH="/sbin:$PATH"
export PATH="/usr/bin:$PATH"
export PATH="/usr/sbin:$PATH"
export PATH="/usr/local/bin:$PATH"
export PATH="/usr/local/sbin:$PATH"
if command -v yarn > /dev/null; then
  export PATH="$HOME/.config/yarn/global/node_modules/.bin:$PATH"
fi
if [ "$(uname)" != "Darwin" ]; then
  export PATH="/opt/linuxbrew/sbin:$PATH"
  export PATH="/opt/linuxbrew/bin:$PATH"
  export PATH="/usr/local/gem/bin:$PATH"
fi
export PATH="$HOME/bin:$PATH"
export PATH="$HOME/.local/bin:$PATH"
export PATH="$HOME/.cargo/bin:$PATH"

export GNUPGHOME="$HOME/.gnupg"
if command -v gpg-agent > /dev/null; then
  export SSH_AUTH_SOCK="$GNUPGHOME/S.gpg-agent.ssh"
fi

if command -v brew > /dev/null; then
  # Cache this, because it's quite slow.
  HOMEBREW_PREFIX="$(brew --prefix)"
  HOMEBREW_REPO="$(brew --repo)"
fi

export CLICOLOR=1

export HISTFILE="$XDG_DATA_HOME/$(basename $SHELL)/history"
export HISTSIZE=10000

export NLTK_DATA="$XDG_DATA_HOME/nltk"

export LESSHISTFILE="$XDG_DATA_HOME/less/history"
export LESS="RS" # color, don't wrap

if command -v kak > /dev/null 2>&1; then
  export EDITOR=kak
  export VISUAL=kak
fi

if [ "$(uname)" != "Darwin" ]; then
  export HOMEBREW_CACHE=/var/cache/linuxbrew
  export HOMEBREW_LOGS=/var/log/linuxbrew
fi
export HOMEBREW_BUILD_FROM_SOURCE=1
export HOMEBREW_DEVELOPER=1
export BINTRAY_USER="alyssais"

if [ -d "$HOMEBREW_PREFIX/opt/chruby" ]; then
  source "$HOMEBREW_PREFIX/opt/chruby/share/chruby/chruby.sh"
  chruby "$(< "$XDG_CONFIG_HOME/chruby/version")"
fi

export BUNDLER_EDITOR="subl"

export GEMRC="$XDG_CONFIG_HOME/gem/config"

if [ "$(uname)" != "Darwin" ]; then
  export GEM_HOME="/usr/local/gem"
  export GEM_SPEC_CACHE="/var/cache/gem/specs"
fi

export PRYRC="$XDG_CONFIG_HOME/pry/rc"

export SPEC_OPTS="--color"

export TRAVIS_CONFIG_PATH="$XDG_DATA_HOME/travis"

export HTTPIE_CONFIG_DIR="$XDG_CONFIG_HOME/httpie"

export SUBVERSION_HOME="$XDG_CONFIG_HOME/subversion"

export NODE_REPL_HISTORY="$XDG_DATA_HOME/node/repl_history"

if [ -n "$HOMEBREW_PREFIX" ]; then
  export PYTHONPATH="$HOMEBREW_PREFIX/lib/python2.7/site-packages"
fi

export FZF_CTRL_T_COMMAND='git ls-files || find .'

if [ -f "$XDG_CONFIG_HOME/shell/env.private" ]; then
  . "$XDG_CONFIG_HOME/shell/env.private"
fi
